/* ============================================
   Cyberpunk Theme - 赛博朋克主题
   ============================================ */

/* ===== 色阶 ===== */
html.theme-cyberpunk {
  --theme-50: #eff6ff;
  --theme-100: #dbeafe;
  --theme-200: #bfdbfe;
  --theme-300: #93c5fd;
  --theme-400: #70B4FF;
  --theme-500: #4A9EFF;
  --theme-600: #2E7FEB;
  --theme-700: #1D6AD8;
  --theme-800: #1e40af;
  --theme-900: #1e3a8a;
}

/* ===== 深色模式 ===== */
/* ===== 深色模式 ===== */
html.theme-cyberpunk {
  /* 霓虹撞色：青 -> 紫红 */
  --accent-primary: #22d3ee;
  /* Cyan-400 */
  --accent-secondary: #d946ef;
  /* Fuchsia-500 */
  --accent-hover: #06b6d4;
  /* Cyan-500 */
  --accent-active: #c026d3;
  /* Fuchsia-600 */
  --accent-glow: rgba(34, 211, 238, 0.75);
  /* 增强辉光强度 */
  --accent-subtle: rgba(217, 70, 239, 0.2);
  --accent-dim: rgba(34, 211, 238, 0.28);
  --accent-text: #22d3ee;
  --accent-btn-text: #0f172a;
  --toggle-knob-c: #ffffff;
  --progress-stripe-c: rgba(255, 255, 255, 0.15);
  --accent-active-bg: var(--accent-subtle);
  /* 移除原有的简单渐变，改用 Grid 背景 */
  --bg-gradient: none;

  --surface-hover: rgba(34, 211, 238, 0.08);
  --surface-active: rgba(34, 211, 238, 0.14);
  --input-bg: rgba(8, 12, 24, 0.72);
  --border-subtle: rgba(34, 211, 238, 0.14);
  --border-normal: rgba(34, 211, 238, 0.22);
  --border-strong: rgba(34, 211, 238, 0.34);
  --border-color: var(--border-normal);

  /* Glass Overrides - Dark (High Contrast) */
  --glass-bg: rgba(10, 15, 30, 0.75);
  --glass-border: rgba(34, 211, 238, 0.3);
  --glass-shadow: 0 0 20px rgba(34, 211, 238, 0.15);
  --glass-blur: blur(16px);
  --glass-saturate: saturate(200%);

  --dialog-bg: rgba(5, 10, 20, 0.9);
  --dialog-overlay-bg: rgba(0, 0, 0, 0.7);
}

/* ===== 深色模式背景 (Retro Grid + Glows) ===== */
html.theme-cyberpunk body {
  background-color: #0b0d14;
  /* Deep Abyss */
  background-image:
    /* 局部霓虹光晕 */
    radial-gradient(circle at 20% 20%, rgba(34, 211, 238, 0.12), transparent 50%),
    radial-gradient(circle at 80% 80%, rgba(217, 70, 239, 0.12), transparent 50%),
    /* 网格线 (水平 + 垂直) */
    linear-gradient(rgba(34, 211, 238, 0.08) 1px, transparent 1px),
    linear-gradient(90deg, rgba(34, 211, 238, 0.08) 1px, transparent 1px);
  background-size:
    100% 100%,
    100% 100%,
    40px 40px,
    /* 网格尺寸 */
    40px 40px;
  background-attachment: fixed;
}

/* ===== 扫描线/噪点纹理 (全局蒙版) ===== */
html.theme-cyberpunk body::after {
  content: "";
  position: fixed;
  inset: 0;
  /* 模拟老式 CRT 屏幕扫描线 */
  background: repeating-linear-gradient(0deg,
      transparent,
      transparent 2px,
      rgba(0, 0, 0, 0.15) 3px,
      rgba(0, 0, 0, 0.15) 3px);
  z-index: 9999;
  /* 覆盖在最顶层 */
  pointer-events: none;
  /* 允许点击穿透 */
  opacity: 0.4;
  mix-blend-mode: overlay;
}

/* ===== 浅色模式 (High-Tech Lab) ===== */
html.light.theme-cyberpunk {
  --accent-primary: #0891b2;
  /* Cyan-600 */
  --accent-secondary: #c026d3;
  /* Fuchsia-600 */
  --accent-hover: #0e7490;
  --accent-active: #a21caf;
  --accent-glow: rgba(8, 145, 178, 0.4);
  --accent-subtle: rgba(217, 70, 239, 0.1);
  --accent-dim: rgba(8, 145, 178, 0.24);
  --accent-text: #0891b2;
  --accent-btn-text: #ffffff;
  --toggle-knob-c: #ffffff;
  --progress-stripe-c: rgba(255, 255, 255, 0.15);
  --accent-active-bg: var(--accent-subtle);
  --bg-gradient: none;

  --surface-hover: rgba(8, 145, 178, 0.1);
  --surface-active: rgba(8, 145, 178, 0.17);
  --input-bg: rgba(255, 255, 255, 0.84);
  --border-subtle: rgba(8, 145, 178, 0.14);
  --border-normal: rgba(8, 145, 178, 0.22);
  --border-strong: rgba(8, 145, 178, 0.32);
  --border-color: var(--border-normal);

  /* Glass Overrides - Light (Lab Clean) */
  --glass-bg: rgba(255, 255, 255, 0.8);
  --glass-border: rgba(8, 145, 178, 0.2);
  --glass-shadow: 0 4px 16px rgba(8, 145, 178, 0.1);
  --glass-blur: blur(20px);
  --glass-saturate: saturate(150%);

  --dialog-bg: rgba(255, 255, 255, 0.95);
  --dialog-overlay-bg: rgba(240, 249, 255, 0.5);
}

/* ===== 浅色模式背景 (Tech Grid) ===== */
html.light.theme-cyberpunk body {
  background-color: #f8fafc;
  background-image:
    /* 局部淡彩光晕 */
    radial-gradient(circle at 10% 10%, rgba(34, 211, 238, 0.08), transparent 60%),
    radial-gradient(circle at 90% 90%, rgba(217, 70, 239, 0.08), transparent 60%),
    /* 浅色网格 */
    linear-gradient(rgba(8, 145, 178, 0.05) 1px, transparent 1px),
    linear-gradient(90deg, rgba(8, 145, 178, 0.05) 1px, transparent 1px);
  background-size:
    100% 100%,
    100% 100%,
    30px 30px,
    30px 30px;
  background-attachment: fixed;
}

/* 浅色模式下减弱扫描线 */
html.light.theme-cyberpunk body::after {
  opacity: 0.15;
  background: repeating-linear-gradient(0deg,
      transparent,
      transparent 2px,
      rgba(0, 0, 0, 0.05) 3px,
      rgba(0, 0, 0, 0.05) 3px);
}

/* ===== 动态呼吸光效 (Neon Pulse) ===== */
@keyframes neon-pulse {
  0% {
    box-shadow: 0 0 5px var(--accent-glow), 0 0 10px var(--accent-subtle);
  }

  50% {
    box-shadow: 0 0 15px var(--accent-glow), 0 0 25px var(--accent-subtle);
  }

  100% {
    box-shadow: 0 0 5px var(--accent-glow), 0 0 10px var(--accent-subtle);
  }
}

/* 应用于核心按钮 (Buttons) */
html.theme-cyberpunk .btn-primary,
html.theme-cyberpunk .btn-confirm,
html.theme-cyberpunk .modal-footer .btn-confirm {
  animation: neon-pulse 3s infinite ease-in-out;
}

html.theme-cyberpunk .panel-overlay,
html.theme-cyberpunk .modal-overlay {
  backdrop-filter: blur(12px);
}

html.theme-cyberpunk .panel,
html.theme-cyberpunk .modal-container {
  border-color: color-mix(in srgb, var(--glass-border) 88%, var(--accent-subtle));
  box-shadow: var(--glass-shadow), 0 0 0 1px color-mix(in srgb, var(--accent-primary) 12%, transparent);
}

html.theme-cyberpunk .panel .content-header,
html.theme-cyberpunk .modal-header {
  border-bottom: 1px solid var(--border-normal);
}

html.theme-cyberpunk .panel .modal-footer,
html.theme-cyberpunk .modal-footer {
  border-top: 1px solid var(--border-normal);
  background: transparent;
}

html.theme-cyberpunk .nav-item.active,
html.theme-cyberpunk .mode-card.active {
  background: color-mix(in srgb, var(--accent-primary) 14%, transparent);
  color: var(--accent-text);
  box-shadow: inset 0 0 0 1px color-mix(in srgb, var(--accent-primary) 30%, transparent);
}

html.theme-cyberpunk .add-btn,
html.theme-cyberpunk .settings-btn {
  border-style: dashed;
  border-color: color-mix(in srgb, var(--accent-primary) 34%, transparent);
  background: color-mix(in srgb, var(--surface-hover) 90%, transparent);
  color: var(--text-secondary);
}

html.theme-cyberpunk .add-btn:hover,
html.theme-cyberpunk .settings-btn:hover {
  border-color: color-mix(in srgb, var(--accent-primary) 46%, transparent);
  background: color-mix(in srgb, var(--accent-primary) 12%, transparent);
  color: var(--text-primary);
}

html.theme-cyberpunk .stats-panel {
  border: 1px solid var(--border-subtle);
  border-radius: 12px;
  padding: 10px 12px;
  background: transparent;
}

html.theme-cyberpunk .stat-count {
  color: var(--accent-text);
  opacity: 0.92;
}

html.theme-cyberpunk .btn-primary,
html.theme-cyberpunk .btn-confirm {
  background: linear-gradient(135deg, color-mix(in srgb, var(--accent-primary) 84%, white), var(--accent-secondary));
  color: var(--accent-btn-text);
  border: 1px solid color-mix(in srgb, var(--accent-primary) 36%, transparent);
  box-shadow: 0 8px 22px color-mix(in srgb, var(--accent-glow) 70%, transparent);
}

html.theme-cyberpunk .btn-primary:hover:not(:disabled),
html.theme-cyberpunk .btn-confirm:hover:not(:disabled) {
  transform: translateY(-1px);
  box-shadow: 0 12px 28px color-mix(in srgb, var(--accent-glow) 78%, transparent);
}

html.theme-cyberpunk .btn-secondary,
html.theme-cyberpunk .btn-cancel,
html.theme-cyberpunk .btn-ghost,
html.theme-cyberpunk .btn-xs-secondary,
html.theme-cyberpunk .mini-action,
html.theme-cyberpunk .mini-btn,
html.theme-cyberpunk .btn-text {
  background: color-mix(in srgb, var(--surface-hover) 90%, transparent);
  border-color: var(--border-normal);
  color: var(--text-secondary);
}

html.theme-cyberpunk .btn-secondary:hover,
html.theme-cyberpunk .btn-cancel:hover,
html.theme-cyberpunk .btn-ghost:hover,
html.theme-cyberpunk .btn-xs-secondary:hover,
html.theme-cyberpunk .mini-action:hover:not(:disabled),
html.theme-cyberpunk .mini-btn:hover,
html.theme-cyberpunk .btn-text:hover {
  color: var(--text-primary);
  border-color: color-mix(in srgb, var(--accent-primary) 44%, transparent);
  background: color-mix(in srgb, var(--accent-primary) 12%, transparent);
}

html.theme-cyberpunk .modal-container .advanced-btn-wrapper .btn-ghost {
  border-style: dashed;
  border-color: color-mix(in srgb, var(--accent-primary) 34%, transparent);
}

html.theme-cyberpunk .modal-container .advanced-btn-wrapper .btn-ghost:hover {
  border-color: color-mix(in srgb, var(--accent-primary) 46%, transparent);
}

html.theme-cyberpunk .path-selector,
html.theme-cyberpunk .ua-dropdown-trigger,
html.theme-cyberpunk .ua-custom-input,
html.theme-cyberpunk .tracker-textarea,
html.theme-cyberpunk .grouped-select,
html.theme-cyberpunk .grouped-input,
html.theme-cyberpunk .inner-input,
html.theme-cyberpunk .inner-input-field,
html.theme-cyberpunk .input-wrapper input,
html.theme-cyberpunk .input-wrapper textarea,
html.theme-cyberpunk .input-wrapper select,
html.theme-cyberpunk .text-input,
html.theme-cyberpunk .modal-container .form-group textarea,
html.theme-cyberpunk .modal-container .form-group input,
html.theme-cyberpunk .modal-container .form-row input,
html.theme-cyberpunk .modal-container .form-row textarea,
html.theme-cyberpunk .modal-container .input-group {
  background: color-mix(in srgb, var(--input-bg) 96%, transparent);
  border-color: var(--border-normal);
}

html.theme-cyberpunk .path-selector:hover,
html.theme-cyberpunk .ua-dropdown-trigger:hover,
html.theme-cyberpunk .input-group:hover,
html.theme-cyberpunk .inner-input:hover,
html.theme-cyberpunk .input-wrapper:hover {
  border-color: color-mix(in srgb, var(--accent-primary) 56%, var(--border-normal));
}

html.theme-cyberpunk .modal-container textarea:focus,
html.theme-cyberpunk .modal-container input:focus,
html.theme-cyberpunk .modal-container .input-group:focus-within,
html.theme-cyberpunk .modal-container .ua-dropdown-trigger:focus-within,
html.theme-cyberpunk input:focus,
html.theme-cyberpunk textarea:focus,
html.theme-cyberpunk select:focus,
html.theme-cyberpunk .ua-custom-input:focus,
html.theme-cyberpunk .grouped-select:focus,
html.theme-cyberpunk .inner-input:focus-within,
html.theme-cyberpunk .input-wrapper:focus-within {
  outline: none;
  border-color: color-mix(in srgb, var(--accent-primary) 62%, var(--border-normal));
  box-shadow: 0 0 0 3px color-mix(in srgb, var(--accent-primary) 18%, transparent);
}

html.theme-cyberpunk .ua-custom-input.error {
  border-color: var(--semantic-danger);
  background: color-mix(in srgb, var(--semantic-danger) 8%, var(--input-bg));
}

html.theme-cyberpunk .ua-custom-input.error:focus {
  border-color: var(--semantic-danger);
  box-shadow: 0 0 0 3px color-mix(in srgb, var(--semantic-danger) 20%, transparent);
}

html.theme-cyberpunk .download-card {
  border-color: color-mix(in srgb, var(--glass-border) 90%, var(--accent-subtle));
  box-shadow: 0 8px 22px rgba(2, 8, 20, 0.3);
  transition: transform 180ms ease, box-shadow 180ms ease, border-color 140ms ease;
}

html.theme-cyberpunk .download-card:hover {
  transform: translateY(-1px);
  box-shadow: 0 10px 24px rgba(2, 8, 20, 0.34), 0 0 0 1px color-mix(in srgb, var(--accent-primary) 16%, transparent);
}

html.theme-cyberpunk .download-card .icon-wrapper {
  background: color-mix(in srgb, var(--surface-active) 88%, transparent);
  border: 1px solid var(--border-subtle);
}

html.theme-cyberpunk .download-card .action-btn {
  background: color-mix(in srgb, var(--surface-hover) 92%, transparent);
  border-color: var(--border-normal);
}

html.theme-cyberpunk .download-card .action-btn:hover {
  box-shadow: 0 0 0 2px color-mix(in srgb, var(--accent-primary) 16%, transparent);
}

html.theme-cyberpunk .download-card .checkbox {
  border-color: var(--border-normal);
  background: color-mix(in srgb, var(--input-bg) 90%, transparent);
}

html.theme-cyberpunk .download-card .checkbox.checked {
  box-shadow: 0 0 0 2px color-mix(in srgb, var(--accent-primary) 18%, transparent), 0 0 10px var(--accent-glow);
}

html.theme-cyberpunk .modal-tabs {
  background: color-mix(in srgb, var(--input-bg) 90%, transparent);
  border: 1px solid var(--border-subtle);
  box-shadow: none;
}

html.theme-cyberpunk .active-indicator {
  background: color-mix(in srgb, var(--surface-active) 90%, transparent);
  border-color: color-mix(in srgb, var(--accent-primary) 34%, transparent);
  box-shadow: 0 4px 14px rgba(2, 10, 24, 0.32);
}

html.theme-cyberpunk .detail-value-box {
  background: color-mix(in srgb, var(--input-bg) 94%, transparent);
  border-color: var(--border-subtle);
}

html.theme-cyberpunk .detail-value-box:hover {
  background: color-mix(in srgb, var(--surface-hover) 92%, transparent);
  border-color: var(--border-normal);
}

html.theme-cyberpunk .item-copy-btn {
  background: color-mix(in srgb, var(--surface-hover) 92%, transparent);
  border-color: var(--border-normal);
}

html.theme-cyberpunk .item-copy-btn:hover {
  box-shadow: 0 0 0 2px color-mix(in srgb, var(--accent-primary) 14%, transparent);
}

html.theme-cyberpunk .status-pill {
  border: 1px solid color-mix(in srgb, currentColor 26%, transparent);
}

html.theme-cyberpunk .menu-item,
html.theme-cyberpunk .file-item {
  color: var(--text-secondary);
}

html.theme-cyberpunk .menu-item:hover,
html.theme-cyberpunk .file-item:hover,
html.theme-cyberpunk .ua-option:hover {
  color: var(--text-primary);
  background: color-mix(in srgb, var(--accent-primary) 10%, transparent);
}

html.theme-cyberpunk .menu-item.danger,
html.theme-cyberpunk .btn-danger {
  color: var(--semantic-danger);
  border-color: color-mix(in srgb, var(--semantic-danger) 30%, transparent);
  background: color-mix(in srgb, var(--semantic-danger) 10%, transparent);
}

html.theme-cyberpunk .menu-item.danger:hover,
html.theme-cyberpunk .btn-danger:hover {
  border-color: color-mix(in srgb, var(--semantic-danger) 44%, transparent);
  background: color-mix(in srgb, var(--semantic-danger) 16%, transparent);
}
