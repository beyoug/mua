# è´¡çŒ®æŒ‡å— (Contributing Guide)

æ„Ÿè°¢ä½ å¯¹ Mua çš„å…³æ³¨ï¼Mua æ˜¯ä¸€ä¸ªå¼€æºé¡¹ç›®ï¼Œæˆ‘ä»¬æ¬¢è¿å¹¶çè§†ä»»ä½•å½¢å¼çš„è´¡çŒ®â€”â€”æ— è®ºæ˜¯ä»£ç å®ç°ã€å›¾æ ‡è®¾è®¡ã€æ–‡æ¡£æ”¹è¿›ï¼Œè¿˜æ˜¯ Bug åé¦ˆã€‚

> å»ºè®®å…ˆé˜…è¯» [README](../README.md) äº†è§£é¡¹ç›®å®šä½ï¼Œå†å‚è€ƒ [development-standards.md](./development-standards.md) å¯¹é½å®ç°è§„èŒƒã€‚

## ğŸ› ï¸ å¼€å‘ç¯å¢ƒæ­å»º

Mua æ˜¯åŸºäº Tauri 2.0 å¼€å‘çš„ï¼Œä½ éœ€è¦å®‰è£…ä»¥ä¸‹ç¯å¢ƒï¼š

1.  **Node.js**: >= 20.x
2.  **pnpm**: >= 9.x
3.  **Rust**: >= 1.77.x
4.  **Tauri ä¾èµ–**: è¯·å‚è€ƒ [Tauri å®˜æ–¹æ–‡æ¡£](https://tauri.app/v2/guides/getting-started/prerequisites) å®‰è£…å„å¹³å°çš„ç¼–è¯‘ä¾èµ–ã€‚

### æ­¥éª¤

1.  **Fork å¹¶å…‹éš†ä»“åº“**

    ```bash
    git clone https://github.com/beyoug/mua.git
    cd Mua
    ```

2.  **å®‰è£…å‰ç«¯ä¾èµ–**

    ```bash
    pnpm install
    ```

3.  **å¯åŠ¨å¼€å‘æ¨¡å¼**

    ```bash
    pnpm tauri:dev
    ```

## ğŸ“œ ä»£ç è§„èŒƒ

### Git æäº¤è§„èŒƒ

æˆ‘ä»¬éµå¾ªæ ‡å‡†çš„æäº¤ä¿¡æ¯è§„èŒƒï¼š

- `feat`: æ–°åŠŸèƒ½
- `fix`: ä¿®å¤ bug
- `docs`: æ–‡æ¡£å˜æ›´
- `style`: ä»£ç æ ¼å¼ï¼ˆä¸å½±å“ä»£ç è¿è¡Œçš„å˜åŠ¨ï¼‰
- `refactor`: é‡æ„ï¼ˆæ—¢ä¸æ˜¯æ–°å¢åŠŸèƒ½ä¹Ÿä¸æ˜¯ä¿®æ”¹ bug çš„ä»£ç å˜åŠ¨ï¼‰
- `perf`: æ€§èƒ½ä¼˜åŒ–
- `test`: å¢åŠ æµ‹è¯•
- `chore`: æ„å»ºè¿‡ç¨‹æˆ–è¾…åŠ©å·¥å…·çš„å˜åŠ¨

### ä»£ç é£æ ¼

- **å‰ç«¯**: ä½¿ç”¨ Prettier è¿›è¡Œæ ¼å¼åŒ–ã€‚
- **åç«¯**: ä½¿ç”¨ `cargo fmt` è¿›è¡Œæ ¼å¼åŒ–ã€‚

## å¤šå¹³å°æ”¯æŒä¸ Sidecar é›†æˆ

Mua ä¾èµ– `aria2c` ä½œä¸ºä¸‹è½½å†…æ ¸ã€‚ä¸ºäº†æ”¯æŒè·¨å¹³å°è¿è¡Œï¼Œæˆ‘ä»¬éœ€è¦åœ¨ `src-tauri/` ç›®å½•ä¸‹æ”¾ç½®å¯¹åº”å¹³å°çš„äºŒè¿›åˆ¶æ–‡ä»¶ã€‚

### äºŒè¿›åˆ¶æ–‡ä»¶è§„èŒƒ

Tauri ä¼šæ ¹æ® **Target Triple** å¯»æ‰¾å¯¹åº”çš„ sidecar æ–‡ä»¶ã€‚æ–‡ä»¶åæ ¼å¼å¿…é¡»ä¸ºï¼š
`aria2c-<target-triple>[.exe]`

| å¹³å° | Target Triple | æœ€ç»ˆæ–‡ä»¶å |
|------|---------------|------------|
| macOS (Intel) | `x86_64-apple-darwin` | `aria2c-x86_64-apple-darwin` |
| macOS (Apple Silicon) | `aarch64-apple-darwin` | `aria2c-aarch64-apple-darwin` |
| Windows (x64) | `x86_64-pc-windows-msvc` | `aria2c-x86_64-pc-windows-msvc.exe` |
| Linux (x64) | `x86_64-unknown-linux-gnu` | `aria2c-x86_64-unknown-linux-gnu` |

### å¦‚ä½•è·å¾—äºŒè¿›åˆ¶æ–‡ä»¶ï¼Ÿ

1.  **ç›´æ¥ä¸‹è½½**: ä» [aria2 Releases](https://github.com/aria2/aria2/releases) æˆ–ç¤¾åŒºé™æ€æ„å»ºï¼ˆå¦‚ [P3TERX/aria2-static-build](https://github.com/P3TERX/aria2-static-build)ï¼‰ä¸‹è½½ã€‚
2.  **è‡ªè¡Œç¼–è¯‘**:
    åœ¨ç›®æ ‡å¹³å°ä¸Šå…‹éš† [aria2 æºç ](https://github.com/aria2/aria2) å¹¶åœ¨æœ¬åœ°ç¼–è¯‘ä»¥è·å¾—æœ€ä½³æ€§èƒ½ï¼š
    ```bash
    # ä»¥ macOS ä¸ºä¾‹
    ./configure --with-appletls --with-libxml2 --with-sqlite3
    make
    cp src/aria2c ./src-tauri/aria2c-aarch64-apple-darwin
    ```

### è‡ªå®šä¹‰å†…æ ¸å®‰å…¨æµç¨‹

å½“ä½ é€šè¿‡è®¾ç½®é¡µå¯¼å…¥è‡ªå®šä¹‰ aria2 äºŒè¿›åˆ¶æ—¶ï¼Œé¡¹ç›®ä¼šæ‰§è¡Œä»¥ä¸‹æµç¨‹ï¼š

1. å¯¼å…¥åè®¡ç®—å¹¶æŒä¹…åŒ– SHA-256 å“ˆå¸Œã€‚
2. é»˜è®¤æ ‡è®°ä¸ºæœªä¿¡ä»»ï¼ˆä¸ä¼šè‡ªåŠ¨å¯ç”¨ï¼‰ã€‚
3. é¦–æ¬¡å¯ç”¨éœ€è¦ç”¨æˆ·æ˜ç¡®ç¡®è®¤ä¿¡ä»»ã€‚
4. æ¯æ¬¡å¯åŠ¨å‰é‡æ–°è®¡ç®—å“ˆå¸Œå¹¶æ¯”å¯¹ï¼›è‹¥ä¸ä¸€è‡´ï¼Œè‡ªåŠ¨å›é€€åˆ°å†…ç½®å†…æ ¸ã€‚

å¦‚æœå‡ºç° `hash_mismatch`ï¼Œè¯·é‡æ–°å¯¼å…¥äºŒè¿›åˆ¶ï¼Œæˆ–åœ¨ç¡®è®¤æ–‡ä»¶å®‰å…¨åæ‰§è¡Œâ€œé‡æ–°å»ºç«‹ä¿¡ä»»â€ã€‚

---

## ğŸš€ è´¡çŒ®æµç¨‹

1.  åˆ›å»ºä¸€ä¸ªæ–°çš„åˆ†æ”¯ (`git checkout -b feature/your-feature`)ã€‚
2.  æäº¤ä½ çš„ä¿®æ”¹ (`git commit -m 'feat: add some feature'`)ã€‚
3.  æ¨é€åˆ°è¿œç¨‹åˆ†æ”¯ (`git push origin feature/your-feature`)ã€‚
4.  åœ¨ GitHub ä¸Šå‘èµ· Pull Requestã€‚

## ğŸ’¬ äº¤æµ

å¦‚æœæœ‰ä»»ä½•é—®é¢˜æˆ–å»ºè®®ï¼Œæ¬¢è¿åœ¨ GitHub Issues ä¸­æå‡ºã€‚
